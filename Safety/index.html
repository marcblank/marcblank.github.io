
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Enhanced%20Instructions/">
      
      
        <link rel="next" href="../TBR/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Safety - Sequencer Powerups</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#when-becomes-unsafe" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sequencer Powerups" class="md-header__button md-logo" aria-label="Sequencer Powerups" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sequencer Powerups
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Safety
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../CVE/" class="md-tabs__link">
        
  
    
  
  Constants/Variables/Expressions

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../DArrays/" class="md-tabs__link">
        
  
    
  
  Arrays

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../DIY%20Meridian%20Flip/" class="md-tabs__link">
        
  
    
  
  DIY Meridian Flip

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Enhanced%20Instructions/" class="md-tabs__link">
        
  
    
  
  Enhanced Instructions

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Safety

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../TBR/" class="md-tabs__link">
        
  
    
  
  Template by Reference

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Triggers/" class="md-tabs__link">
        
  
    
  
  Triggers

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Z/" class="md-tabs__link">
        
  
    
  
  This &amp; That

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../xternal%20Script%20%2B/" class="md-tabs__link">
        
  
    
  
  External Script +

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sequencer Powerups" class="md-nav__button md-logo" aria-label="Sequencer Powerups" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sequencer Powerups
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CVE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constants/Variables/Expressions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../DArrays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arrays
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../DIY%20Meridian%20Flip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DIY Meridian Flip
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Enhanced%20Instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enhanced Instructions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Safety
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Safety
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-becomes-unsafe" class="md-nav__link">
    <span class="md-ellipsis">
      When Becomes Unsafe
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#once-safe-and-wait-for-safe" class="md-nav__link">
    <span class="md-ellipsis">
      Once Safe and Wait for Safe +
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Once Safe and Wait for Safe +">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#once-safe" class="md-nav__link">
    <span class="md-ellipsis">
      Once Safe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wait-for-safe" class="md-nav__link">
    <span class="md-ellipsis">
      Wait for Safe +
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#looping-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Looping Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reentrancy" class="md-nav__link">
    <span class="md-ellipsis">
      Reentrancy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-safe-variable" class="md-nav__link">
    <span class="md-ellipsis">
      The SAFE Variable
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../TBR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template by Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Triggers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Triggers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Z/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    This &amp; That
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../xternal%20Script%20%2B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Script +
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Safety</h1>

<p>Sequencer Powerups has a number of instructions that help with the handling of safe/unsafe conditions. All of these instructions require that an ASCOM-compilant Safety Monitor is connected to NINA.</p>
<p>Generally, imagers will want to execute some kind of "subroutine" when their gear becomes "unsafe", and then  return to their imaging if and when their gear becomes "safe" again. The following instructions were designed exactly for this purpose.</p>
<h2 id="when-becomes-unsafe">When Becomes Unsafe</h2>
<p>The <strong>When Becomes Unssafe</strong> trigger allows you to specify a set of instructions to execute within a couple of seconds of your gear becoming "unsafe". Typically, these intructions might include <strong>Close Dome Shutter</strong>, <strong>Park Scope</strong>, an instruction to send yourself a notification (as with the Ground Station plugin), and things of that sort.</p>
<p><img alt="" src="../WBU.png" /></p>
<h2 id="once-safe-and-wait-for-safe">Once Safe and Wait for Safe +</h2>
<p>One of these two instructions will almost always be used after the instructions that put your gear into a safe configuration.</p>
<h3 id="once-safe">Once Safe</h3>
<p>The <strong>Once Safe</strong> instruction is the preferred way of continuing to image after <strong>When Becomes Unsafe</strong> is triggered.  As with <strong>When Becomes Unsafe</strong>, you add instructions within <strong>Once Safe</strong> that get your gear ready to continue imnaging.  Typically, this would include instructions to open a dome, unpark your mount, slew back to your target, start guiding, perhaps autofocus, etc.   When the last of these instructions is executed, NINA will go right back to what it was doing when WBU was initially executed.   The screenshot above shows the use of <strong>When Becomes Unsafe</strong> with <strong>Once Safe</strong>.</p>
<h3 id="wait-for-safe">Wait for Safe +</h3>
<p>The <strong>Wait for Safe+</strong> instruction can also be used within the <strong>When Becomes Unsafe</strong> instruction; this, as you'd expect, simply waits for conditions to become safe again and then continues, typically with instructions, as with <strong>Once Safe</strong>, that prepare your gear for continued imaging.</p>
<p>I strongly recommend using <strong>Once Safe</strong> as opposed to <strong>Wait for Safe +</strong></p>
<h2 id="looping-considerations">Looping Considerations</h2>
<p>It's important to note that looping conditions are honored during the execution of a <strong>When Becomes Unsafe</strong> instruction, thereby allowing your sequences to naturally terminate cleanly even if conditions never become safe again.  For example, in the case below, tne <strong>When Becomes Unsafe</strong> will stop when the <strong>Loop Until Time</strong> expires at Astronomical Dawn, even if the sequencer is sitting in a <strong>Once Safe</strong> or a <strong>Wait until Safe +</strong> instruction.</p>
<p><img alt="" src="../WBULoop.png" /></p>
<h2 id="reentrancy">Reentrancy</h2>
<p><strong>When Becomes Unsafe</strong> has been designed for reentrancy - tnat is, if conditions become unsafe <em>again</em> during execution of the trigger (including while in the midst of <strong>Once Safe</strong> or after a <strong>Wait for Safe+</strong>), tne <strong>When Becomes Unsafe</strong> will restart itself. <strong>When Becomes Unsafe</strong> can be used over and over within a Sequence.</p>
<h2 id="the-safe-variable">The <strong>SAFE</strong> Variable</h2>
<p>Typically, the concept of <em>safety</em> in NINA depends upon having a connected Safety Monitor device that can report conditions as being "safe" or "unsafe". Indeed, all of the safety-related instructions in Powerups typically use this in determining the current safety status of your gear. However, there are cases in which a NINA user may wish to simulate the preence of a safety monitor using other data, for example a weather reporting device. To allow for these cases, Powerups will, in addition to the state of a Safety Monitor, look to see if a Variable named SAFE (all uppercase) is defined.  If it is, its value is used to determine whether conditions are safe or unsafe, <em>regardless of the state of a connected Safety Monitor</em>. The table below shows how Powerups behaves depending on the states of a Safety Monitor and the SAFE Variable.</p>
<table>
<thead>
<tr>
<th>Safety Monitor</th>
<th>SAFE Variable</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Safe</td>
<td>Undefined or true</td>
<td>Safe</td>
</tr>
<tr>
<td>Safe</td>
<td>Defined and false</td>
<td>Unsafe</td>
</tr>
<tr>
<td>Unsafe</td>
<td>Undefined or false</td>
<td>Unsafe</td>
</tr>
<tr>
<td>Unsafe</td>
<td>Defined and true</td>
<td>Safe</td>
</tr>
<tr>
<td>Not connected</td>
<td>Undefined or true</td>
<td>Safe</td>
</tr>
<tr>
<td>Not connected</td>
<td>Defined and false</td>
<td>Unsafe</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.hightlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>